\chapter{Vaatimukset ja järjestelmän kuvaus} % Itse luvun otsikko. Huom ei numeroa!                                         santeri on ruma
\label{kuvaus} % Tähän kappaleeseen voi viitata \ref{kuvaus}
\thispagestyle{fancy} % Tarvitaan, jotta header/footer näkyvät otsikkosivuilla


\section{Mallintaminen}  % 3.1
    Tässä kappaleessa kuvaillaan kaksi käyttäjätarinaa. 


\subsection{Kayttotapauskaavio(t)}    % 3.1.1

\subsubsection{Käyttäjätapaus 1: Käyttäjätietojen tarkastelu}   % 3.1.1.1

    Antti Asiakas haluaa tarkastella itseään koskevia tietoja sekä raportteja. Antin tulee valita etusivulta löytyvä
    \textit{Omat tiedot} -painike, jotta hän pääsee katsomaan omia tietojaan. 

    Täältä Antti voi:

    \begin{itemize}
        \item tarkastella ja muuttaa omia yhteystietojaan
        \item tarkastella itseään koskevia raportteja
        \item poistaa itsensä järjestelmästä
        \item kirjautua ulos
    \end{itemize}

    Jos Antti valitsee itseään koskevat raportit, järjestelmä esittää hänelle hänen oman ostohistoriansa,
    voimassa olevat alennukset sekä mahdolliset suurostobonukset.
    Jos Antilla ei ole aiempaa historiaa Megantin kanssa, järjestelmä ei tarjoa hänelle raporttia.

\subsubsection{Käyttäjätapaus 2: Personoidun tarjouksen\/tajouksien luonti ja lähettäminen}     % 3.1.1.2

    Järjestelmä ehdottaa Mikko Myyntitykille mahdollista alennusta koskien tiettyä asiakasryhmää.
    Mahdollinen alennus perustuu järjestelmän omiin sisäisiin statistiikkoihin ja algoritmeihin.
    Mikko voi hyväksyä, olla hyväksymättä alennusta, tai halutessaan määritellä tarjouksen itse.
    Jos Mikko syöttää järjestelmään alennuksen, joka on erittäin suuri, järjestelmä antaa hänelle varoituksen.
    Mikko voi myös tarkastaa, että järjestelmä ei luo alennuksia, jotka ovat liian suuria tai pieniä.
    Alennusta myönnettäessä määritellään sen suuruus, kesto, tuoteryhmät sekä asiakaskohderyhmä.

    Jos jonkinlainen alennus myönnetään, järjestelmä lähettää asiakasryhmälle sähköisen ilmoituksen alennuksesta (tarjouskirje).

\subsection{Tietoyhteyskaavio(t)}   % 3.1.2


\subsection{Navigointikaavio}     % 3.1.3
    
    Esimerkit asiakkaan ja sisäisen toimijan navigointikaavioista löytyy liitteestä x   % TODO lisää liiteet

\section{Käyttöliittymä}  % 3.2
    % Rautalankamallit neljästäkäyttöliittymänäkymästä (view) ja esimerkki mahdollisista ikkunoista (dialog). 
    % Pitää olla vähintään yleisnäkymä/päänäyttö, asiakkaan tietoihin liittyvä näkymä ja raportteihin liittyvä näkymä



\section{Vaatimukset}       % 3.3
    % Vaatimusten keruun perusteella täydennetty taulukko (alkuperäiset kehyskertomuksen mukaiset ja vaatimuksen keruussa löydetyt uudet) vaatimuksista, joko suoraan dokumenttiin tai liitteenä

    \subsection{Esimerkkivaatimus 1: Loki}
        % Tarkempi kuvaus toiminnallisesta vaatimuksesta, joka ei ole suoraan sidoksissa käyttäjän tekemisiin (esim joku automaattitoiminnoista)
        Järjestelmän tulee pitää kirjaa järjestelmätapahtumista. Tämä sisältää kaikki muutokset mitä eri käyttäjät (niin sisäiset kuin ulkoisetkin) tekevät.
        Se sisältää tiedot myös kaikista ostoksista, tilinsiirroista ja alennuksista. Osa näistä tiedoista poistetaan välimuistista tietyn ajan 
        jälkeen. Tällaisia tietoja ovat esimerkiksi käyttähän osoitetietojen muutokset. Järjestelmän ylläpitäjät voivat käyttää tätä dataa hyödyksi tarkastellessaan 
        järjestelmän tilaa. 
    \subsection{Esimerkkivaatimus 2: Access Policy}
        % Tarkempi kuvaus ei-toiminnallisesta vaatimuksesta
        Järjestelmässä tulee olla selkeä \textit{Access policy} käyttäjille. Tämä tullaan käytännössä toteuttamaan
        minumum access policy -periaatetta. Eli jokaisella käyttäjällä on minimioikeudet järjestelmään.
        Tämä käytäntö suojaa sekä yksittäistä laitetta, että koko verkkoa, jossa järjestelmä on käytössä. 
        


    % Esimerkkivaatimuksen perusteella lukijan tulisi ymmärtää, mitä vaatimuksen perusteella 
    % järjestelmässä tapahtuu/mitä järjestelmä tekee eli miten järjestelmän toiminta näkyy käyttäjille. 
    % Ei tarvitse mennä teknisiin ratkaisuihin (tietokantahaut jne)



\section{Ympäristö}     % 3.4
    \subsection{Liittyvät järjestelmät}     % 3.4.1
        % Mitä liittyviä järjestelmiä on (esim vanha järjestelmä, viranomaisjärjestelmät, muut yrityksen järjestelmät)? Mitä vaatimuksia ne asettavat määrittelydokumentin järjestelmälle?
        Uusi \gls{crm} tulee käytännössä integroitumaan jo olemassa olevan \gls{erp} järjestelmän alijärjestelmäksi. Näinollen sen tulee pystyä kommunikoimaan muunmuassa olemassaolevan tietokannan kanssa. Kommunikointiin kuuluu muunmuassa tilausten, asiakastietojen, tuotteiden ja myyntihistorian hakeminen, luominen, ja muuttaminen järjestelmässä. Uudella \gls{crm}:llä ei tule olemaan omaa tietokantaa, vaan se hyödyntää jo olemassaolevaa tietokantaa suoraan. 


    \subsection{Tarvittavat yhteydet ja muut ympäristön vaatimukset}  % 3.4.2
        % Ympäristön (toiminta-tai käyttöympäristö) asettamia vaatimuksia? Mitä vaaditaan järjestelmältä, mitä järjestelmä vaatii ympäristöltä.
        Koska \gls{crm} tulee käyttämään jo olemassaolevan \gls{erp}:n tietokantaa, tulee se sijoittaa fyysisesti mahdollisimman lähelle tietokantapalvelun tarjoavaa järjestelmää. Näin saadaan minimoitua mahdollinen latenssi järjestelmien välillä ja nopeutettua operaatioiden suoritusta. Suositusnopeus \gls{crm}:n ja \gls{erp}:n välillä käytettävälle linkille on 40Gbit/s ja sen tulisi olla kahdennettu (\gls{redundantg}). 

        Järjestelmän saatavuus tulisi myös taata replikoimalla palvelimia vähintään kolmeen instanssiin. Tämä voidaan käytännössä toteuttaa esimerkiksi virtualisoinnin (\gls{virtualg}) avulla. Näin saatavuus säilyy vaikka yhdessä instanssissa ilmenisikin ongelma. Järjestelmän virransyöttö tulee hoitaa kokonaan \gls{ups} kautta. 

        Koska järjestelmään pääsee käsiksi myös internetin kautta, tulee sille tarjota mahdollisimman nopea linkki internetiin. Tämän linkin suositusnopeus on minimissään 1Gbit/s molempiin suuntiin (palvelimelta internetiin ja toisinpäin). 

        Palvelintila tulisi olla sellainen, johon vain kyseiseen tilaan kulkuluvan omaavilla on pääsy. Tällainen kulkulupa tulisi olla minimimäärällä henkilöstöä, mitä mahdollista. 


\section{Jatkokehitysajatukset}     % 3.5

    Vaikka järjestelmä on tarkoitettu nykyisellä rakenteella Megantti konsernin käyttöön, niin sitä on kuitenkin tulevaisuudessa
    mahdollisuus jatkokehittää ja tuotteistaa, jolloin Megantti voisi tarjota sitä muille yrityksille valmiina CRM:änä.

    Myös, jos Megantti laajentaa toimintaa kansainvälisille markkinoille ja näille tytäryhtiöille otetaan myös käyttöön rakennettava
    CMR, tulee vähintään järjestelmän kieliä lisätä. Todennäköisesti myös uusia rajapintajärjestelmiä tulisi ottaa huomioon ja implementoida.


\section{Avoimet asiat}     % 3.6
    % Avoimeksi jääneitä asioita esim. määrittelyn aikataulun kiireen tai jonkin muun syyn takia.



   
